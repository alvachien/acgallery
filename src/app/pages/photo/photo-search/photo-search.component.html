<nz-page-header class="site-page-header" [nzTitle]="'Nav.Photos' | transloco" [nzSubtitle]="'Common.Search' | transloco">
  <nz-breadcrumb nz-page-header-breadcrumb>
    <nz-breadcrumb-item>Welcome</nz-breadcrumb-item>
    <nz-breadcrumb-item>
      <a>{{'Nav.Photos' | transloco}}</a>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item>{{'Common.Search' | transloco}}</nz-breadcrumb-item>
  </nz-breadcrumb>
  <nz-page-header-extra>
  </nz-page-header-extra>
</nz-page-header>

<!-- Filter -->
<div>
  <div nz-row *ngFor="let filter of filters; let idxfilter = index" class="control-full-width">
    <div nz-col nzSpan="4">
      <nz-form-item>
        <nz-select nzPlaceHolder="{{'Common.Field' | transloco}}" [(ngModel)]="filter.fieldName" (ngModelChange)="onFieldSelectionChanged(filter)">
          <nz-option *ngFor="let field of allFields" [nzValue]="field.value" [nzLabel]="field.displayas | transloco">
          </nz-option>
        </nz-select>
      </nz-form-item>  
    </div>
    <div nz-col nzSpan="2">
      <nz-form-item>
        <nz-select nzPlaceHolder="{{'Common.Operator' | transloco}}" [(ngModel)]="filter.operator">
          <nz-option *ngFor="let opr of allOperators | operatorFilter: filter.valueType" [nzValue]="opr.value" [nzLabel]="opr.i18nterm | transloco">
          </nz-option>
        </nz-select>
      </nz-form-item>
    </div>
    <div nz-col nzSpan="4">
      <nz-form-item *ngIf="filter.valueType === 1">
        <input nz-input type="number" placeholder="{{'Common.Value' | transloco}}" name="lvalue_1" [(ngModel)]="filter.value[0]">
      </nz-form-item>
      <nz-form-item *ngIf="filter.valueType === 2">
        <input nz-input type="text" placeholder="{{'Common.Value' | transloco}}" name="lvalue_2" [(ngModel)]="filter.value[0]">
      </nz-form-item>
      <nz-form-item *ngIf="filter.valueType === 3">
        <nz-range-picker [nzShowTime]="true" [(ngModel)]="filter.value"></nz-range-picker>
      </nz-form-item>
      <div class="typechkbox" *ngIf="filter.valueType === 4">
        <label nz-checkbox [(ngModel)]="filter.value[0]">Checkbox</label>
      </div>
    </div>
    <div nz-col nzSpan="4">
      <nz-form-item *ngIf="filter.valueType === 1">
        <input nz-input type="number" placeholder="{{'Common.Value' | transloco}}" name="hvalue_1" [(ngModel)]="filter.value[1]">
      </nz-form-item>
    </div>
    <div nz-col nzSpan="4">
      <button nz-button aria-label="Add" (click)="onAddFilter()">
        <i nz-icon nzType="plus"></i>
      </button>
      <button nz-button aria-label="Clear" (click)="onRemoveFilter(idxfilter)">
        <i nz-icon nzType="delete"></i>
      </button>
    </div>
  </div>

  <div nz-row class="control-full-width">
    <button nz-button aria-label="Search" (click)="onSearch()">
      <i nz-icon nzType="search"></i>{{'Common.Search' | transloco}}
    </button>
  </div>
</div>

<div nz-row nzJustify="center">
  <nz-pagination [(nzPageIndex)]="pageIndex" [nzTotal]="resultsLength" [nzPageSize]="20" [nzShowTotal]="rangeTemplate"
    nzShowQuickJumper (nzPageIndexChange)="onPageIndexChanged($event)"></nz-pagination>
  <ng-template #rangeTemplate let-range="range" let-total> {{ range[0] }}-{{ range[1] }} of {{ total }} items </ng-template>        
</div>

<nz-divider></nz-divider>

<nz-image-group>
  <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }">
    <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="8" nzXl="6" class="gutter-row" [nzSpan]="6" *ngFor="let pht of photos">
      <div nz-col class="inner-box">
        <div nz-row>
          <img nz-image width="200px" [nzSrc]="getFileUrl(pht)" alt="" />
        </div>
        <div nz-row class="button-group-row">
          <nz-tag *ngFor="let tag of pht.tags" [nzColor]="'#f50'">{{tag}}</nz-tag>
        </div>
        <div nz-row *ngIf="viewMode === 'adv'" class="button-group-row">
          <nz-button-group>
            <a nz-button nzType="link" (click)="onChangePhoto(pht)" nzGhost>{{'Common.Edit' | transloco}}</a>
            <a nz-button nzType="link" (click)="onDeletePhoto(pht)" nzDanger>{{'Common.Delete' | transloco}}</a>
          </nz-button-group>  
        </div>
      </div>
    </div>
  </div>
</nz-image-group>

<nz-divider></nz-divider>

<div nz-row nzJustify="center">
  <nz-pagination [(nzPageIndex)]="pageIndex" [nzTotal]="resultsLength" [nzPageSize]="20" [nzShowTotal]="rangeTemplate"
    nzShowQuickJumper (nzPageIndexChange)="onPageIndexChanged($event)"></nz-pagination>
</div>
